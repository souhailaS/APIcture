<!DOCTYPE html>
<html>
  <head>
    <title>ECharts Chart</title>
    <style>
      /* Add any custom CSS styles here */
    </style>
  </head>
  <body>
    <div id="chartContainer" style="height: 100vh"></div>
    <!-- import echart from online  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.1.0/echarts.min.js"></script>
    <script>
              // Initialize ECharts chart with the container element
              var chartContainer = document.getElementById('chartContainer');
              var chart = echarts.init(chartContainer, null, {
                renderer: 'svg'
              });

              // Set the chart options and data
              var chartOptions = <%-JSON.stringify(JSON.parse(JSON.stringify(chartOptions))) %>;
              chart.setOption(chartOptions);


              let format = "<%=format %>";
              if(format != "svg"){

               // Convert the chart to a data URL
               var dataURL = chart.getDataURL({
                    type: format, // Support png and jpeg only
                    pixelRatio: 2, // Increase pixelRatio for higher resolution
                    backgroundColor: "#fff", // Set background color, if desired
                  });

                  // Create a link element
                  var link = document.createElement("a");
                  link.href = dataURL;
                  link.download = "chart."+format;

                  // Programmatically trigger the click event to download the image
                  link.click();
                }

              




      
    </script>
  </body>
</html>
